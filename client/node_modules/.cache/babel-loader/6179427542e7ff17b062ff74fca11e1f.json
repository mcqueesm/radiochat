{"ast":null,"code":"import _classCallCheck from \"/Users/RoseSamuel/Desktop/RadioChat/client/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/Users/RoseSamuel/Desktop/RadioChat/client/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/Users/RoseSamuel/Desktop/RadioChat/client/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/Users/RoseSamuel/Desktop/RadioChat/client/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/Users/RoseSamuel/Desktop/RadioChat/client/node_modules/@babel/runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"/Users/RoseSamuel/Desktop/RadioChat/client/src/components/withAuth.js\";\nimport React, { Component } from \"react\";\nimport { Redirect } from \"react-router-dom\";\nimport axios from \"axios\";\nexport default function withAuth(ProtectedComponent) {\n  return (\n    /*#__PURE__*/\n    function (_Component) {\n      _inherits(_class, _Component);\n\n      function _class() {\n        var _this;\n\n        _classCallCheck(this, _class);\n\n        _this = _possibleConstructorReturn(this, _getPrototypeOf(_class).call(this));\n        _this.state = {\n          loading: true,\n          redirect: false\n        };\n        return _this;\n      }\n\n      _createClass(_class, [{\n        key: \"componentDidMount\",\n        value: function componentDidMount() {\n          var _this2 = this;\n\n          axios.get(\"/verifyToken\").then(function (res) {\n            if (res.status === 200) {\n              _this2.setState({\n                loading: false\n              });\n            } else {\n              var error = new Error(\"Server responded with error\");\n              throw error;\n            }\n          }).catch(function (err) {\n            console.error(err);\n\n            _this2.setState({\n              loading: false,\n              redirect: true\n            });\n          });\n        }\n      }, {\n        key: \"render\",\n        value: function render() {\n          var _this$state = this.state,\n              loading = _this$state.loading,\n              redirect = _this$state.redirect;\n\n          if (loading) {\n            return null;\n          }\n\n          if (redirect) {\n            return React.createElement(Redirect, {\n              to: \"/login\",\n              __source: {\n                fileName: _jsxFileName,\n                lineNumber: 38\n              },\n              __self: this\n            });\n          }\n\n          return React.createElement(React.Fragment, {\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 41\n            },\n            __self: this\n          }, React.createElement(ProtectedComponent, Object.assign({}, this.props, {\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 42\n            },\n            __self: this\n          })));\n        }\n      }]);\n\n      return _class;\n    }(Component)\n  );\n}","map":{"version":3,"sources":["/Users/RoseSamuel/Desktop/RadioChat/client/src/components/withAuth.js"],"names":["React","Component","Redirect","axios","withAuth","ProtectedComponent","state","loading","redirect","get","then","res","status","setState","error","Error","catch","err","console","props"],"mappings":";;;;;;AAAA,OAAOA,KAAP,IAAgBC,SAAhB,QAAiC,OAAjC;AACA,SAASC,QAAT,QAAyB,kBAAzB;AACA,OAAOC,KAAP,MAAkB,OAAlB;AAEA,eAAe,SAASC,QAAT,CAAkBC,kBAAlB,EAAsC;AACnD;AAAA;AAAA;AAAA;;AACE,wBAAc;AAAA;;AAAA;;AACZ;AACA,cAAKC,KAAL,GAAa;AACXC,UAAAA,OAAO,EAAE,IADE;AAEXC,UAAAA,QAAQ,EAAE;AAFC,SAAb;AAFY;AAMb;;AAPH;AAAA;AAAA,4CASsB;AAAA;;AAClBL,UAAAA,KAAK,CACFM,GADH,CACO,cADP,EAEGC,IAFH,CAEQ,UAAAC,GAAG,EAAI;AACX,gBAAIA,GAAG,CAACC,MAAJ,KAAe,GAAnB,EAAwB;AACtB,cAAA,MAAI,CAACC,QAAL,CAAc;AAAEN,gBAAAA,OAAO,EAAE;AAAX,eAAd;AACD,aAFD,MAEO;AACL,kBAAMO,KAAK,GAAG,IAAIC,KAAJ,CAAU,6BAAV,CAAd;AACA,oBAAMD,KAAN;AACD;AACF,WATH,EAUGE,KAVH,CAUS,UAAAC,GAAG,EAAI;AACZC,YAAAA,OAAO,CAACJ,KAAR,CAAcG,GAAd;;AACA,YAAA,MAAI,CAACJ,QAAL,CAAc;AAAEN,cAAAA,OAAO,EAAE,KAAX;AAAkBC,cAAAA,QAAQ,EAAE;AAA5B,aAAd;AACD,WAbH;AAcD;AAxBH;AAAA;AAAA,iCA0BW;AAAA,4BACuB,KAAKF,KAD5B;AAAA,cACCC,OADD,eACCA,OADD;AAAA,cACUC,QADV,eACUA,QADV;;AAEP,cAAID,OAAJ,EAAa;AACX,mBAAO,IAAP;AACD;;AACD,cAAIC,QAAJ,EAAc;AACZ,mBAAO,oBAAC,QAAD;AAAU,cAAA,EAAE,EAAC,QAAb;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,cAAP;AACD;;AACD,iBACE,oBAAC,KAAD,CAAO,QAAP;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,aACE,oBAAC,kBAAD,oBAAwB,KAAKW,KAA7B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,aADF,CADF;AAKD;AAvCH;;AAAA;AAAA,MAAqBlB,SAArB;AAAA;AAyCD","sourcesContent":["import React, { Component } from \"react\";\nimport { Redirect } from \"react-router-dom\";\nimport axios from \"axios\";\n\nexport default function withAuth(ProtectedComponent) {\n  return class extends Component {\n    constructor() {\n      super();\n      this.state = {\n        loading: true,\n        redirect: false\n      };\n    }\n\n    componentDidMount() {\n      axios\n        .get(\"/verifyToken\")\n        .then(res => {\n          if (res.status === 200) {\n            this.setState({ loading: false });\n          } else {\n            const error = new Error(\"Server responded with error\");\n            throw error;\n          }\n        })\n        .catch(err => {\n          console.error(err);\n          this.setState({ loading: false, redirect: true });\n        });\n    }\n\n    render() {\n      const { loading, redirect } = this.state;\n      if (loading) {\n        return null;\n      }\n      if (redirect) {\n        return <Redirect to=\"/login\" />;\n      }\n      return (\n        <React.Fragment>\n          <ProtectedComponent {...this.props} />\n        </React.Fragment>\n      );\n    }\n  };\n}\n"]},"metadata":{},"sourceType":"module"}